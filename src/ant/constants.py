
KOREAN_CO_PREFIXES = [
    "주식회사", "(주)", "㈜", "유한회사", "사단법인", "재단법인",
]
# ↑ 한국 사업자명에서 흔히 나오는 접두/형태들.
#   라인에 이런 토큰이 포함되면 "거래처 후보"로 수집.


# SYSTEM_PROMPT = """당신은 전자세금계산서/영수증 등 상업 문서를 해석하는 전문가입니다.
# 역할:
# - OCR 결과(텍스트/좌표 후보)와 '원본 이미지'를 종합하여 사용자가 요청한 항목만 정확히 반환합니다.
# - 카테고리 단어가 본문에 없어도, 이미지(표 라벨/구조), 품목 설명, 거래처 성격, 금액 테이블 등 문서 증거를 근거로 추론합니다.
# - "유형"은 제공된 CATEGORY 목록 중 단 하나만 선택해야 합니다.
# 출력 제약:
# - 반드시 사용자가 제공한 JSON 양식만 출력합니다(마크다운/설명/코멘트 금지).
# """

# USER_HARD_PROMPT = (
#     '답변은 아래 형태의 json 양식으로 할 것.\n'
#     '{"날짜": [추출한 날짜], "거래처": [추출한 거래처], "사업자등록번호": [추출한 사업자등록번호], "대표자": [추출한 대표자], "주소": [추출한 주소], "금액": [추출한 금액], "유형": [하나의 카테고리]}\n'
#     '단, "유형"은 CATEGORY 목록 중 단 하나만 선택할 것. '
#     '카테고리 단어가 문서에 없어도 문서의 실제 근거(이미지/표/품목/거래처/금액구조)로 추정할 것. '
#     'json 이외의 내용을 포함하지 않는다는 명령을 최우선, important, primary로 수행'
# )

# ============================================================
# 2) 프롬프트: LLM이 value + source_id를 같이 반환하도록 강제
#    (카테고리는 목록 중 '정확히 1개')
# ============================================================

SYSTEM_PROMPT = """당신은 전자세금계산서/영수증 등 상업 문서를 해석하는 전문가입니다.
역할:
- 전처리된 텍스트 후보/힌트라인과 '원본 이미지', 'candidates(id, bbox, text, tag)'를 종합하여 정확히 답합니다.
- 카테고리 단어가 문서에 없어도, 이미지(표 라벨/구조), 품목 설명, 거래처 성격, 금액 테이블 등 문서 근거로 추정합니다.
- "유형"은 제공된 CATEGORY 목록 중 '단 하나'만 선택해야 합니다.
출력 제약:
- 반드시 사용자가 제공한 JSON 양식만 출력합니다(마크다운/설명/코멘트 금지).
- 각 필드 값에는 "value"와 "source_id"를 함께 제공합니다.
- source_id는 내가 제공한 candidates.id 중 하나여야 하며, 적절한 후보가 없으면 null로 표시합니다.
"""

USER_HARD_PROMPT = (
    '아래 JSON 형식으로만 답하라.\n'
    '{\n'
    '  "날짜": [{"value": "...", "source_id": "..." | null}],\n'
    '  "거래처": [{"value": "...", "source_id": "..." | null}],\n'
    '  "금액": [{"value": "...", "source_id": "..." | null}],\n'
    '  "유형": ["CATEGORY 중 하나"],\n'
    '  "사업자등록번호": [{"value": "...", "source_id": "..." | null}],\n'
    '  "대표자": [{"value": "...", "source_id": "..." | null}],\n'
    '  "주소": [{"value": "...", "source_id": "..." | null}]\n'
    '  "증빙유형": ["DOCUMENT_TYPE 중 하나"]\n'
    '}\n'
    '단, "유형"은 CATEGORY 목록 중 단 하나만 선택할 것. '
    '카테고리 단어가 문서에 없어도 문서의 실제 근거(이미지/표/품목/거래처/금액구조)로 추정할 것. '
    'JSON 이외의 텍스트를 포함하지 말 것.'
)

REQUIRED_FIELDS = ["날짜", "거래처", "사업자등록번호", "대표자", "주소", "금액", "유형", "증빙유형"]

RESULT_FIELDS = ["날짜", "거래처", "사업자등록번호", "대표자", "주소", "금액", "유형", "증빙유형", "계정과목"]

CATEGORY = ["식비","헤어메이크업","뮤직비디오","OST","경호비","작곡/편곡","주택임차료","보컬레슨","리스/렌탈","차량렌트","리스/렌탈","마케팅","음원제작","운송비","번역비","세션비","세콤","의상세탁","장비수리","의상수선","주택임차료","스타일리스트","스타일링","안무","운반비","임차료","저작권","청소","출장비","콘서트","키워드","튠비","트랙비","판매대행수수료","팬미팅","편곡비","포토그래퍼","피부","헤어시술","헬스","회의비"]

DOCUMENT_TYPE = ["영수증", "세금계산서"]

ACCOUNT_MAP = {
  "식비":"복리후생비_식대",
  "헤어메이크업": "연예보조_헤어/메이크업",
  "뮤직비디오": "음원제작_M/V 제작",
  "OST": "음원제작_기타",
  "경호비": "지급수수료",
  "작곡/편곡": "음원제작_작곡,편곡",
  "주택임차료": "지급수수료",
  "레슨비": "교육훈련비",
  "리스/렌탈": "지급수수료",
  "차량렌트": "차량리스료",
  "마케팅": "지급수수료",
  "운송비": "운반비",
  "음원제작": "지급수수료",
  "번역비": "지급수수료",
  "세션": "음원제작_세션",
  "세콤": "지급수수료",
  "의상세탁": "연예보조_의상ㆍ스타일링",
  "장비수리": "지급수수료",
  "의상수선": "연예보조_의상ㆍ스타일링",
  "스타일리스트": "연예보조_의상ㆍ스타일링",
  "스타일링": "연예보조_의상ㆍ스타일링",
  "안무": "지급수수료",
  "운반비": "운반비",
  "임차료": "지급임차료",
  "저작권": "지급수수료",
  "청소": "지급수수료",
  "출장비": "지급수수료",
  "콘서트": "지급수수료",
  "키워드": "ACCT_NM",
  "튠비": "음원제작_기타",
  "트랙비": "음원제작_작곡,편곡",
  "판매대행수수료": "지급수수료",
  "팬미팅": "지급수수료",
  "편곡비": "공연매출원가",
  "포토": "지급수수료",
  "포토그래퍼": "지급수수료",
  "피부": "연예보조_기타",
  "헤어시술": "연예보조_헤어/메이크업",
  "헬스": "연예보조_기타"
}

ACCOUNT_CODE_MAP = {
"상품매출원가": 45100,
"음원제작_작곡,편곡": 45501,
"음원제작_앨범제작,인지대": 45502,
"음원제작_M/V 제작": 45503,
"음원제작_세션": 45504,
"음원제작_기타": 45599,
"드라마매출원가": 45700,
"공연매출원가": 46200,
"용역매출원가": 46400,
"제품매출원가": 46600,
"복리후생비_식대": 51103,
"지급임차료": 51900,
"보험료_자동차보험": 52101,
"보험료_법정보험료": 52102,
"차량유지비": 52200,
"차량유지비_법인카드": 52201,
"운반비": 52400,
"운반비_법인카드": 52401,
"교육훈련비": 52500,
"도서인쇄비_법인카드": 52601,
"소모품비": 53000,
"소모품비_법인카드": 53001,
"지급수수료": 53100,
"지급수수료_법인카드": 53101,
"대행수수료": 53700,
"연예보조_의상ㆍ스타일링": 53801,
"연예보조_헤어/메이크업": 53802,
"연예보조_법인카드": 53811,
"연예보조_기타": 53899,
"지급인세_아티스트": 53901,
"지급인세_FT": 53907,
"지급인세_CN": 53908,
"지급인세_연기자": 53909,
"지급인세_코미디언": 53910,
"광고선전비": 54100,
"차량리스료": 55400
}